<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form validation</title>
    <link rel="stylesheet" href="form.css">
    <script src="https://kit.fontawesome.com/22e0cee632.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="header">
            <h2>Create Account</h2>
        </div>
        <form class="form" id="form">
            <div class="form-control">
                <label>Username</label>
                <input type="text" placeholder="Frontend forever" id="username">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label>Email</label>
                <input type="email" placeholder="@@email" id="email">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label>Password</label>
                <input type="password" placeholder="password" id="password">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label>Password2</label>
                <input type="password2" placeholder="Confirm Password" id="password2">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error message</small>
            </div>
            <button>Submit</button>
        </form>
    </div>
    <script>
        const form = document.getElementById("form");
        const username = document.getElementById("username");
        const email = document.getElementById("email");
        const password = document.getElementById("password");
        const password2 = document.getElementById("password2");
        form.addEventListener('submit', e=>{
            e.preventDefault();
            checkInput();

        });
        function checkInput() {
            const usernameValue = username.value.trim();
            const emailValue = email.value.trim();
            const passwordValue = password.value.trim();
            const password2Value = password2.value.trim();
            if (usernameValue === '') {
                setError(username, "Username Cannot be blank");
            }
            else {
                setSuccess(username);
            }


            if (emailValue === '') {
                setError(email, "Email Cannot be Blank");
            }
            else if (!isEmail(emailValue))
             {
                setError(email, "Not a Valid Email");
            }
            else {
                setSuccess(email);
            }

            if (passwordValue === '')
             {
                setError(password, "Password Cannot be blank");
            }
            else {
                setSuccess(password);
            }

            if (password2Value === '') {
                setError(password2, "Password Cannot be blank");
            }
            else if (passwordValue !== password2Value){
                setError(password2, "Password Does not Match")
            }
            else {
                setSuccess(password2);
            }

        }
            function setError(input,message){
                const formControl=input.parentElement;
                const small=formControl.querySelector('small');
                formControl.classname='form-control error';
                small.innerText=message;
            }
            function setSuccess(input){
                const formControl=input.parentElement;
                formControl.classname='form-control success';
            }


            function isEmail(email) {
                //let email=document.getElementById("email").value
                return /[a-z][\.-]*[\w]?[@]+[\w][.]+[\w]{2,3}$/.test(email);
            }

        

    </script>

</body>

</html>